{% extends "base.html" %}
{% block title %}Assessment - YuVA Wellness{% endblock %}

{% block extra_head %}
<style>
.chat-container {
    max-width: 1000px;
    margin: 0 auto;
    min-height: 100vh;
    background: var(--bg-primary);
    display: flex;
    flex-direction: column;
}

.chat-header {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    padding: 1.5rem 2rem;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 100;
}

.chat-header h2 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
}

.progress-info {
    font-size: 0.9rem;
    opacity: 0.9;
}

.progress-bar {
    background: rgba(255, 255, 255, 0.2);
    height: 4px;
    border-radius: 2px;
    margin: 0.5rem 0;
    overflow: hidden;
}

.progress-fill {
    background: white;
    height: 100%;
    transition: width 0.3s ease;
    border-radius: 2px;
}

.language-buttons {
    margin-top: 1rem;
}

.nav-buttons {
    margin-top: 1rem;
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.nav-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.nav-btn.active {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
}

.lang-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 0.5rem 1rem;
    margin: 0 0.5rem;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.lang-btn.active {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
}

.chat-content {
    flex: 1;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.question-card {
    background: var(--bg-card);
    border-radius: 15px;
    padding: 2rem;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.question-number {
    color: var(--primary);
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 1rem;
}

.question-text {
    color: var(--text-primary);
    font-size: 1.2rem;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.options-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
}

.option-button {
    background: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: 12px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.option-button:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
}

.option-emoji {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.option-text {
    font-size: 1rem;
    line-height: 1.4;
    color: var(--text-primary);
}

.option-button:hover .option-text {
    color: white;
}

.ai-response {
    background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
    border-left: 4px solid #00b894;
    padding: 1.5rem;
    border-radius: 8px;
    margin: 1rem 0;
    color: #2d3748;
    font-style: italic;
}

.completion-section {
    background: var(--bg-card);
    border-radius: 15px;
    padding: 2rem;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.completion-title {
    color: var(--primary);
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    text-align: center;
}

.recommendation-section {
    margin-bottom: 2rem;
}

.recommendation-title {
    color: var(--text-primary);
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    border-bottom: 2px solid var(--primary);
    padding-bottom: 0.5rem;
}

.recommendation-list {
    list-style: none;
    padding: 0;
}

.recommendation-list li {
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-secondary);
    line-height: 1.5;
}

.recommendation-list li:last-child {
    border-bottom: none;
}

.restart-button {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: block;
    margin: 2rem auto 0;
}

.restart-button:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
}

.loading {
    opacity: 0.6;
    pointer-events: none;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade-in {
    animation: fadeIn 0.5s ease-out;
}

.section-content {
    display: none;
}

.section-content.active {
    display: block;
}
</style>
{% endblock %}

{% block content %}
<div class="chat-container">
    <div class="chat-header">
        <h2>üß† YuVA Wellness Assessment & Guide</h2>
        <div class="progress-info">
            <span id="progress-text">Question 1 of 8</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 12.5%"></div>
        </div>
        <div class="language-buttons">
            <button class="lang-btn active" onclick="setLanguage('en')" id="lang-en">English</button>
            <button class="lang-btn" onclick="setLanguage('hi-en')" id="lang-hi">‡§π‡§ø‡§Ç‡§ó‡•ç‡§≤‡§ø‡§∂</button>
        </div>
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('assessment')" id="nav-assessment">Wellness Assessment</button>
            <button class="nav-btn" onclick="showSection('education')" id="nav-education">Mental Health Guide</button>
        </div>
    </div>

    <div class="chat-content">
        <!-- Assessment section -->
        <div id="assessment-section" class="section-content active">
            <!-- Assessment content will be loaded here -->
        </div>
        
        <!-- Education section -->
        <div id="education-section" class="section-content">
            <!-- Education content will be loaded here -->
        </div>
    </div>
</div>

<script>
let currentQuestionIndex = 0;
let currentLang = localStorage.getItem('yuva-language') || 'en';
let userResponses = [];
let currentSection = 'assessment';

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
    console.log('Page loaded');
    updateLanguageButtons();
    showSection('assessment');
});

function showSection(section) {
    console.log('Showing section:', section);
    currentSection = section;
    
    // Update navigation buttons
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById('nav-' + section).classList.add('active');
    
    // Show/hide sections
    document.querySelectorAll('.section-content').forEach(sec => sec.classList.remove('active'));
    document.getElementById(section + '-section').classList.add('active');
    
    // Show/hide progress bar
    const progressText = document.getElementById('progress-text');
    const progressBar = document.querySelector('.progress-bar');
    
    if (section === 'assessment') {
        progressText.style.display = 'block';
        progressBar.style.display = 'block';
        startConversation();
    } else if (section === 'education') {
        progressText.style.display = 'none';
        progressBar.style.display = 'none';
        showEducationContent();
    }
}

function startConversation() {
    console.log('Starting conversation');
    currentQuestionIndex = 0;
    userResponses = [];
    
    // Update progress to show first question
    updateProgress();
    
    // Show first question
    showNextQuestion();
}

const questions = {
    en: [
        {
            id: 1,
            text: "Hi! I'm YuVA, your mental health companion. Let's start with understanding your recent experiences. Over the past 2 weeks, how often have you felt down, depressed, or hopeless?",
            options: [
                { value: 'depression_none', emoji: 'üòä', text: 'Not at all - I\'ve been feeling positive' },
                { value: 'depression_several', emoji: 'üòê', text: 'Several days - occasionally feeling low' },
                { value: 'depression_more_half', emoji: 'üòî', text: 'More than half the days' },
                { value: 'depression_daily', emoji: 'üòû', text: 'Nearly every day' }
            ]
        },
        {
            id: 2,
            text: "Thank you for sharing. Now, over the past 2 weeks, how often have you been bothered by feeling nervous, anxious, or on edge?",
            options: [
                { value: 'anxiety_none', emoji: 'üòå', text: 'Not at all - I feel calm and relaxed' },
                { value: 'anxiety_several', emoji: 'üòü', text: 'Several days - some worry here and there' },
                { value: 'anxiety_more_half', emoji: 'üò∞', text: 'More than half the days' },
                { value: 'anxiety_daily', emoji: 'üò®', text: 'Nearly every day' }
            ]
        },
        {
            id: 3,
            text: "I appreciate your openness. How has your ability to concentrate on tasks been lately?",
            options: [
                { value: 'focus_excellent', emoji: 'üéØ', text: 'Excellent - I can focus well on tasks' },
                { value: 'focus_good', emoji: 'üëç', text: 'Good - minor distractions but manageable' },
                { value: 'focus_poor', emoji: 'üòµ', text: 'Poor - hard to concentrate on anything' },
                { value: 'focus_very_poor', emoji: 'üåÄ', text: 'Very poor - can\'t focus at all' }
            ]
        },
        {
            id: 4,
            text: "How would you describe your energy levels recently?",
            options: [
                { value: 'energy_high', emoji: '‚ö°', text: 'High energy - feeling motivated and active' },
                { value: 'energy_normal', emoji: 'üîã', text: 'Normal - balanced energy throughout the day' },
                { value: 'energy_low', emoji: 'ü™´', text: 'Low energy - feeling tired often' },
                { value: 'energy_exhausted', emoji: 'üò¥', text: 'Exhausted - constantly drained' }
            ]
        },
        {
            id: 5,
            text: "How has your social life and relationships been affecting you?",
            options: [
                { value: 'social_positive', emoji: 'ü§ó', text: 'Positive - enjoying time with others' },
                { value: 'social_neutral', emoji: 'üòê', text: 'Neutral - normal social interactions' },
                { value: 'social_avoiding', emoji: 'üòî', text: 'Avoiding - prefer to be alone' },
                { value: 'social_isolated', emoji: 'üòû', text: 'Isolated - feeling disconnected from others' }
            ]
        },
        {
            id: 6,
            text: "How well are you managing stress in your daily life?",
            options: [
                { value: 'stress_well', emoji: 'üßò', text: 'Very well - I have good coping strategies' },
                { value: 'stress_okay', emoji: 'üòä', text: 'Okay - manageable with some effort' },
                { value: 'stress_struggling', emoji: 'üòì', text: 'Struggling - stress affects my daily life' },
                { value: 'stress_overwhelmed', emoji: 'üò∞', text: 'Overwhelmed - stress is unmanageable' }
            ]
        },
        {
            id: 7,
            text: "How much interest or pleasure do you have in doing activities you usually enjoy?",
            options: [
                { value: 'interest_high', emoji: 'üéâ', text: 'High interest - enjoying activities as usual' },
                { value: 'interest_some', emoji: 'üôÇ', text: 'Some interest - less enthusiasm than before' },
                { value: 'interest_little', emoji: 'üòë', text: 'Little interest - activities feel like chores' },
                { value: 'interest_none', emoji: 'üòû', text: 'No interest - nothing seems enjoyable' }
            ]
        },
        {
            id: 8,
            text: "Finally, what is your primary concern or goal for your mental wellness right now?",
            options: [
                { value: 'goal_mood', emoji: 'üòä', text: 'Improving my overall mood and happiness' },
                { value: 'goal_anxiety', emoji: 'üòå', text: 'Managing anxiety and worry' },
                { value: 'goal_stress', emoji: 'üßò', text: 'Better stress management and coping' },
                { value: 'goal_relationships', emoji: 'ü§ù', text: 'Improving relationships and social connections' }
            ]
        }
    ],
    'hi-en': [
        {
            id: 1,
            text: "Namaste! Main YuVA hun, aapka mental health companion. Chaliye samjhte hain aapke recent experiences. Pichle 2 weeks mein, kitni baar aapne feel kiya hai down, depressed, ya hopeless?",
            options: [
                { value: 'depression_none', emoji: 'üòä', text: 'Bilkul nahi - main positive feel kar raha hun' },
                { value: 'depression_several', emoji: 'üòê', text: 'Kuch din - kabhi kabhi low feel karta hun' },
                { value: 'depression_more_half', emoji: 'üòî', text: 'Adhik din - zyada time sad rehta hun' },
                { value: 'depression_daily', emoji: 'üòû', text: 'Har din - almost daily depressed feel karta hun' }
            ]
        },
        {
            id: 2,
            text: "Thank you for sharing. Ab batayiye, pichle 2 weeks mein kitni baar aapko laga hai nervous, anxious, ya restless?",
            options: [
                { value: 'anxiety_none', emoji: 'üòå', text: 'Bilkul nahi - main calm aur relaxed feel karta hun' },
                { value: 'anxiety_several', emoji: 'üòü', text: 'Kuch din - thoda sa worry hota hai kabhi kabhi' },
                { value: 'anxiety_more_half', emoji: 'üò∞', text: 'Zyada din - adhik time anxious rehta hun' },
                { value: 'anxiety_daily', emoji: 'üò®', text: 'Har din - daily anxiety hoti hai' }
            ]
        },
        {
            id: 3,
            text: "Main appreciate karta hun aapki honesty. Aajkal aapki concentration kaam mein kaisi hai?",
            options: [
                { value: 'focus_excellent', emoji: 'üéØ', text: 'Excellent - main achhi tarah focus kar sakta hun' },
                { value: 'focus_good', emoji: 'üëç', text: 'Good - thoda distraction hai par manage ho jata hai' },
                { value: 'focus_poor', emoji: 'üòµ', text: 'Poor - kisi bhi kaam mein concentrate nahi kar pata' },
                { value: 'focus_very_poor', emoji: 'üåÄ', text: 'Very poor - bilkul focus nahi kar pata' }
            ]
        },
        {
            id: 4,
            text: "Aapki energy levels recently kaisi hain?",
            options: [
                { value: 'energy_high', emoji: '‚ö°', text: 'High energy - motivated aur active feel karta hun' },
                { value: 'energy_normal', emoji: 'üîã', text: 'Normal - din bhar balanced energy rehti hai' },
                { value: 'energy_low', emoji: 'ü™´', text: 'Low energy - aksar tired feel karta hun' },
                { value: 'energy_exhausted', emoji: 'üò¥', text: 'Exhausted - hamesha drained feel karta hun' }
            ]
        },
        {
            id: 5,
            text: "Aapki social life aur relationships aapko kaise affect kar rahi hain?",
            options: [
                { value: 'social_positive', emoji: 'ü§ó', text: 'Positive - logon ke saath time enjoy karta hun' },
                { value: 'social_neutral', emoji: 'üòê', text: 'Neutral - normal social interactions hain' },
                { value: 'social_avoiding', emoji: 'üòî', text: 'Avoiding - akela rehna prefer karta hun' },
                { value: 'social_isolated', emoji: 'üòû', text: 'Isolated - logon se disconnected feel karta hun' }
            ]
        },
        {
            id: 6,
            text: "Daily life mein stress ko kitna achha manage kar rahe hain aap?",
            options: [
                { value: 'stress_well', emoji: 'üßò', text: 'Very well - mere paas good coping strategies hain' },
                { value: 'stress_okay', emoji: 'üòä', text: 'Okay - thodi effort se manage ho jata hai' },
                { value: 'stress_struggling', emoji: 'üòì', text: 'Struggling - stress meri daily life affect karta hai' },
                { value: 'stress_overwhelmed', emoji: 'üò∞', text: 'Overwhelmed - stress bilkul manage nahi ho pata' }
            ]
        },
        {
            id: 7,
            text: "Jo activities aapko usually pasand hain, unmein kitna interest ya pleasure feel karte hain?",
            options: [
                { value: 'interest_high', emoji: 'üéâ', text: 'High interest - activities enjoy kar raha hun as usual' },
                { value: 'interest_some', emoji: 'üôÇ', text: 'Some interest - pehle se kam enthusiasm hai' },
                { value: 'interest_little', emoji: 'üòë', text: 'Little interest - activities chores ki tarah lagti hain' },
                { value: 'interest_none', emoji: 'üòû', text: 'No interest - kuch bhi enjoyable nahi lagta' }
            ]
        },
        {
            id: 8,
            text: "Finally, aapka primary concern ya goal kya hai mental wellness ke liye right now?",
            options: [
                { value: 'goal_mood', emoji: 'üòä', text: 'Overall mood aur happiness improve karna' },
                { value: 'goal_anxiety', emoji: 'üòå', text: 'Anxiety aur worry manage karna' },
                { value: 'goal_stress', emoji: 'üßò', text: 'Better stress management aur coping' },
                { value: 'goal_relationships', emoji: 'ü§ù', text: 'Relationships aur social connections improve karna' }
            ]
        }
    ]
};

function updateProgress() {
    const progressText = document.getElementById('progress-text');
    const progressFill = document.getElementById('progress-fill');
    
    const totalQuestions = questions[currentLang].length;
    const progress = (currentQuestionIndex / totalQuestions) * 100;
    progressText.textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
    progressFill.style.width = `${progress}%`;
}

function showNextQuestion() {
    const questionSet = questions[currentLang];
    const question = questionSet[currentQuestionIndex];
    const assessmentSection = document.getElementById('assessment-section');
    
    const optionsHtml = question.options.map(option => `
        <button class="option-button" onclick="selectOption('${option.value}')">
            <span class="option-emoji">${option.emoji}</span>
            <span class="option-text">${option.text}</span>
        </button>
    `).join('');
    
    assessmentSection.innerHTML = `
        <div class="question-card fade-in">
            <div class="question-number">Question ${question.id} of ${questionSet.length}</div>
            <div class="question-text">${question.text}</div>
            <div class="options-container">
                ${optionsHtml}
            </div>
        </div>
    `;
}

function selectOption(value) {
    console.log('Selected option:', value, 'for question', currentQuestionIndex + 1);
    userResponses.push(value);
    currentQuestionIndex++;
    
    // Update progress
    updateProgress();
    
    // Check if we've completed all questions
    if (currentQuestionIndex >= questions[currentLang].length) {
        showCompletionScreen();
    } else {
        showNextQuestion();
    }
}

function showCompletionScreen() {
    const assessmentSection = document.getElementById('assessment-section');
    
    // Generate personalized recommendations based on responses
    const recommendations = generateRecommendations(userResponses);
    
    // Create a summary of the user's responses
    const analysis = {
        depression: getResponseLevel(userResponses, 'depression'),
        anxiety: getResponseLevel(userResponses, 'anxiety'),
        focus: getResponseLevel(userResponses, 'focus'),
        energy: getResponseLevel(userResponses, 'energy'),
        social: getResponseLevel(userResponses, 'social'),
        stress: getResponseLevel(userResponses, 'stress'),
        interest: getResponseLevel(userResponses, 'interest'),
        goal: getGoalType(userResponses)
    };
    
    const positiveCount = Object.values(analysis).filter(level => level === 'positive').length;
    const isOverallPositive = positiveCount >= 4;
    
    // Create wellness summary
    const wellnessSummary = createWellnessSummary(analysis, isOverallPositive);
    
    assessmentSection.innerHTML = `
        <div class="completion-section fade-in">
            <h2 class="completion-title">${isOverallPositive ? 'üåü Excellent Mental Wellness!' : 'ü§ó Your Wellness Journey'}</h2>
            
            ${wellnessSummary}
            
            <div class="recommendation-section">
                <h3 class="recommendation-title">üéØ Immediate Actions (This Week)</h3>
                <ul class="recommendation-list">
                    ${recommendations.immediate.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            
            <div class="recommendation-section">
                <h3 class="recommendation-title">üìÖ Weekly Goals</h3>
                <ul class="recommendation-list">
                    ${recommendations.weekly.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            
            <div class="recommendation-section">
                <h3 class="recommendation-title">üå± Monthly Objectives</h3>
                <ul class="recommendation-list">
                    ${recommendations.monthly.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            
            <div class="recommendation-section">
                <h3 class="recommendation-title">üõ†Ô∏è Recommended Techniques</h3>
                <ul class="recommendation-list">
                    ${recommendations.techniques.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            
            <div class="recommendation-section">
                <h3 class="recommendation-title">üè• Professional Resources</h3>
                <ul class="recommendation-list">
                    ${recommendations.professional.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            
            <button class="restart-button" onclick="startConversation()">Take Assessment Again</button>
        </div>
    `;
}

function createWellnessSummary(analysis, isOverallPositive) {
    const positiveAreas = [];
    const concernAreas = [];
    
    Object.entries(analysis).forEach(([area, level]) => {
        if (area === 'goal') return; // Skip goal in summary
        
        const areaName = area.charAt(0).toUpperCase() + area.slice(1);
        if (level === 'positive') {
            positiveAreas.push(areaName);
        } else if (level === 'moderate' || level === 'severe') {
            concernAreas.push(`${areaName} (${level})`);
        }
    });
    
    if (isOverallPositive) {
        return `
            <div style="background: linear-gradient(135deg, #e8f5e8, #f0f8f0); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; border-left: 4px solid #00b894;">
                <h3 style="color: #2d3748; font-size: 1.3rem; font-weight: 600; margin-bottom: 1rem;">
                    üéâ Your Mental Wellness Summary
                </h3>
                <p style="color: #2d3748; line-height: 1.6; margin-bottom: 1rem;">
                    Congratulations! Your responses indicate strong mental wellness across most areas. You're doing an excellent job managing your mental health.
                </p>
                <div style="color: #2d3748;">
                    <strong style="color: #00b894;">Strong Areas:</strong> ${positiveAreas.join(', ') || 'Multiple areas showing positive wellness'}
                </div>
                ${concernAreas.length > 0 ? `
                    <div style="color: #2d3748; margin-top: 0.5rem;">
                        <strong style="color: #e17055;">Areas for Attention:</strong> ${concernAreas.join(', ')}
                    </div>
                ` : ''}
            </div>
        `;
    } else {
        return `
            <div style="background: linear-gradient(135deg, #fff5f5, #fef5e7); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; border-left: 4px solid #e17055;">
                <h3 style="color: #2d3748; font-size: 1.3rem; font-weight: 600; margin-bottom: 1rem;">
                    ü§ó Your Mental Wellness Summary
                </h3>
                <p style="color: #2d3748; line-height: 1.6; margin-bottom: 1rem;">
                    Thank you for your honest responses. It takes courage to assess your mental health. The recommendations below are tailored to help you improve your wellness.
                </p>
                ${positiveAreas.length > 0 ? `
                    <div style="color: #2d3748; margin-bottom: 0.5rem;">
                        <strong style="color: #00b894;">Strong Areas:</strong> ${positiveAreas.join(', ')}
                    </div>
                ` : ''}
                <div style="color: #2d3748;">
                    <strong style="color: #e17055;">Areas Needing Support:</strong> ${concernAreas.join(', ') || 'Multiple areas could benefit from attention'}
                </div>
                <p style="color: #2d3748; font-style: italic; margin-top: 1rem; font-size: 0.9rem;">
                    Remember: Seeking help is a sign of strength, not weakness. You've taken an important first step.
                </p>
            </div>
        `;
    }
}

function generateRecommendations(responses) {
    console.log('Generating recommendations for responses:', responses);
    
    // Analyze each response to determine severity levels
    const analysis = {
        depression: getResponseLevel(responses, 'depression'),
        anxiety: getResponseLevel(responses, 'anxiety'),
        focus: getResponseLevel(responses, 'focus'),
        energy: getResponseLevel(responses, 'energy'),
        social: getResponseLevel(responses, 'social'),
        stress: getResponseLevel(responses, 'stress'),
        interest: getResponseLevel(responses, 'interest'),
        goal: getGoalType(responses)
    };
    
    console.log('Analysis:', analysis);
    
    // Check if user has mostly positive responses
    const positiveCount = Object.values(analysis).filter(level => level === 'none' || level === 'positive').length;
    const isOverallPositive = positiveCount >= 5;
    
    console.log('Positive responses count:', positiveCount, 'Overall positive:', isOverallPositive);
    
    // Different base recommendations based on overall wellness
    let recommendations;
    
    if (isOverallPositive) {
        // Positive/maintenance recommendations
        recommendations = {
            immediate: [
                "üéâ Great job maintaining your mental wellness!",
                "Continue your current positive habits and routines",
                "Take time to appreciate your mental health progress"
            ],
            weekly: [
                "Maintain your current exercise and social activities",
                "Continue practicing stress management techniques that work for you",
                "Share your positive coping strategies with others who might benefit"
            ],
            monthly: [
                "Consider becoming a mental health advocate in your community",
                "Explore new hobbies or interests to continue growing",
                "Maintain regular check-ins with your support network"
            ],
            techniques: [
                "Keep using the coping strategies that are working well for you",
                "Practice gratitude daily to maintain positive mindset",
                "Continue mindfulness or meditation practices"
            ],
            professional: [
                "No immediate professional intervention needed",
                "Consider annual mental health check-ups for prevention",
                "You might benefit from wellness coaching for continued growth"
            ]
        };
    } else {
        // Support-needed recommendations
        recommendations = {
            immediate: [
                "Take small steps each day - progress matters more than perfection",
                "Reach out to someone you trust for support",
                "Practice self-compassion - you're taking important steps by seeking help"
            ],
            weekly: [
                "Focus on basic self-care: sleep, nutrition, and gentle movement",
                "Try to maintain one social connection each week",
                "Establish small, achievable daily routines"
            ],
            monthly: [
                "Work on building a stronger support network",
                "Consider professional mental health support",
                "Focus on gradual lifestyle improvements"
            ],
            techniques: [
                "Start with basic breathing exercises and relaxation techniques",
                "Try journaling to process difficult emotions",
                "Practice grounding techniques when feeling overwhelmed"
            ],
            professional: [
                "Consider speaking with a mental health professional",
                "Explore therapy options that might work for you",
                "Don't hesitate to seek immediate help if you're in crisis"
            ]
        };
    }
    
    // Add specific recommendations based on analysis
    
    // Depression-specific recommendations
    if (analysis.depression === 'severe') {
        recommendations.immediate.push("Engage in one small enjoyable activity daily, even if it feels difficult");
        recommendations.immediate.push("Reach out to a trusted friend or family member today");
        recommendations.weekly.push("Schedule pleasant activities throughout the week");
        recommendations.techniques.push("Behavioral activation - gradually increase daily activities");
        recommendations.professional.push("URGENT: Consider contacting a mental health professional immediately");
    } else if (analysis.depression === 'moderate') {
        recommendations.immediate.push("Engage in one enjoyable activity daily");
        recommendations.weekly.push("Schedule 2-3 activities you used to enjoy");
        recommendations.techniques.push("Challenge negative thoughts with positive alternatives");
    } else if (analysis.depression === 'mild') {
        recommendations.weekly.push("Maintain regular social connections");
        recommendations.techniques.push("Gratitude practice - write 3 things you're grateful for daily");
    }
    
    // Anxiety-specific recommendations
    if (analysis.anxiety === 'severe') {
        recommendations.immediate.push("Practice the 4-7-8 breathing technique when feeling anxious");
        recommendations.immediate.push("Limit caffeine and alcohol intake");
        recommendations.techniques.push("Progressive muscle relaxation for physical tension");
        recommendations.professional.push("Consider anxiety-focused therapy (CBT or exposure therapy)");
    } else if (analysis.anxiety === 'moderate') {
        recommendations.immediate.push("Practice grounding techniques (5-4-3-2-1 method)");
        recommendations.weekly.push("Identify and gradually face anxiety triggers");
        recommendations.techniques.push("Challenge anxious thoughts with evidence-based thinking");
    } else if (analysis.anxiety === 'mild') {
        recommendations.techniques.push("Regular relaxation exercises to prevent anxiety buildup");
    }
    
    // Focus-specific recommendations
    if (analysis.focus === 'poor') {
        recommendations.immediate.push("Break tasks into smaller, manageable chunks");
        recommendations.weekly.push("Create a distraction-free workspace");
        recommendations.techniques.push("Pomodoro technique - 25 minutes focused work, 5 minute breaks");
    } else if (analysis.focus === 'moderate') {
        recommendations.weekly.push("Practice single-tasking instead of multitasking");
        recommendations.techniques.push("Mindfulness exercises to improve concentration");
    }
    
    // Energy-specific recommendations
    if (analysis.energy === 'low') {
        recommendations.immediate.push("Take a 10-minute walk outdoors each day");
        recommendations.weekly.push("Focus on nutrition - eat regular, balanced meals");
        recommendations.monthly.push("Consider vitamin D and B12 level check with your doctor");
    } else if (analysis.energy === 'very_low') {
        recommendations.immediate.push("Prioritize rest - don't overcommit to activities");
        recommendations.immediate.push("Eat protein-rich breakfast to stabilize energy");
        recommendations.professional.push("Discuss fatigue with your primary care physician");
    }
    
    // Social-specific recommendations
    if (analysis.social === 'isolated') {
        recommendations.immediate.push("Send a text or make a call to one person you care about");
        recommendations.weekly.push("Attend one social activity, even if brief");
        recommendations.monthly.push("Consider joining a support group or community activity");
    } else if (analysis.social === 'avoiding') {
        recommendations.weekly.push("Reach out to one person you haven't spoken to in a while");
        recommendations.techniques.push("Practice social skills in low-pressure situations");
    }
    
    // Stress-specific recommendations
    if (analysis.stress === 'overwhelmed') {
        recommendations.immediate.push("Identify and eliminate one non-essential stressor this week");
        recommendations.immediate.push("Practice saying 'no' to additional commitments");
        recommendations.techniques.push("Time management and prioritization strategies");
        recommendations.professional.push("Consider stress management counseling");
    } else if (analysis.stress === 'struggling') {
        recommendations.weekly.push("Develop a daily stress-relief routine");
        recommendations.techniques.push("Learn and practice stress management techniques");
    }
    
    // Interest-specific recommendations
    if (analysis.interest === 'none') {
        recommendations.immediate.push("Try one small activity you used to enjoy for just 5 minutes");
        recommendations.weekly.push("Experiment with new activities to rediscover interests");
        recommendations.techniques.push("Behavioral activation - schedule pleasant activities even without motivation");
    } else if (analysis.interest === 'little') {
        recommendations.weekly.push("Gradually increase time spent on enjoyable activities");
    }
    
    // Goal-specific recommendations
    if (analysis.goal === 'mood') {
        recommendations.monthly.push("Develop a regular exercise routine (3-4 times per week)");
        recommendations.techniques.push("Mood tracking to identify patterns and triggers");
    } else if (analysis.goal === 'anxiety') {
        recommendations.monthly.push("Learn and practice anxiety management techniques consistently");
        recommendations.techniques.push("Exposure therapy exercises for specific fears");
    } else if (analysis.goal === 'stress') {
        recommendations.monthly.push("Implement comprehensive stress management lifestyle changes");
        recommendations.techniques.push("Regular stress assessment and coping strategy adjustment");
    } else if (analysis.goal === 'relationships') {
        recommendations.monthly.push("Work on communication skills and relationship building");
        recommendations.techniques.push("Practice active listening and empathy exercises");
    }
    
    // Remove duplicates and limit recommendations
    Object.keys(recommendations).forEach(key => {
        recommendations[key] = [...new Set(recommendations[key])].slice(0, 5);
    });
    
    return recommendations;
}

function getResponseLevel(responses, category) {
    const response = responses.find(r => r.includes(category));
    if (!response) return 'none';
    
    console.log('Analyzing response:', response, 'for category:', category);
    
    // Positive responses (good mental health)
    if (response.includes('depression_none') || response.includes('anxiety_none') || 
        response.includes('focus_excellent') || response.includes('energy_high') || 
        response.includes('social_positive') || response.includes('stress_well') || 
        response.includes('interest_high')) {
        return 'positive';
    }
    
    // Mild issues
    if (response.includes('depression_several') || response.includes('anxiety_several') || 
        response.includes('focus_good') || response.includes('energy_normal') || 
        response.includes('social_neutral') || response.includes('stress_okay') || 
        response.includes('interest_some')) {
        return 'mild';
    }
    
    // Moderate issues
    if (response.includes('depression_more_half') || response.includes('anxiety_more_half') || 
        response.includes('focus_poor') || response.includes('energy_low') || 
        response.includes('social_avoiding') || response.includes('stress_struggling') || 
        response.includes('interest_little')) {
        return 'moderate';
    }
    
    // Severe issues
    if (response.includes('depression_daily') || response.includes('anxiety_daily') || 
        response.includes('focus_very_poor') || response.includes('energy_exhausted') || 
        response.includes('social_isolated') || response.includes('stress_overwhelmed') || 
        response.includes('interest_none')) {
        return 'severe';
    }
    
    return 'none';
}

function getGoalType(responses) {
    const goalResponse = responses.find(r => r.includes('goal_'));
    if (!goalResponse) return 'mood';
    
    if (goalResponse.includes('goal_mood')) return 'mood';
    if (goalResponse.includes('goal_anxiety')) return 'anxiety';
    if (goalResponse.includes('goal_stress')) return 'stress';
    if (goalResponse.includes('goal_relationships')) return 'relationships';
    return 'mood';
}

function showEducationContent() {
    console.log('Showing education content');
    const educationSection = document.getElementById('education-section');
    
    educationSection.innerHTML = `
        <div class="question-card fade-in">
            <h2 style="color: var(--primary); text-align: center; margin-bottom: 1rem;">
                üß† Understanding Mental Health Conditions
            </h2>
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                Learn about different mental health conditions - their symptoms, causes, and treatment options.
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üòî</div>
                        <h3 style="color: var(--text-primary); margin: 0;">Depression</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        A mood disorder causing persistent feelings of sadness, hopelessness, and loss of interest in activities.
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Persistent sad, empty, or hopeless feelings<br>
                        ‚Ä¢ Loss of interest in activities once enjoyed<br>
                        ‚Ä¢ Sleep disturbances (insomnia or oversleeping)<br>
                        ‚Ä¢ Fatigue and decreased energy<br>
                        ‚Ä¢ Difficulty concentrating or making decisions<br>
                        ‚Ä¢ Changes in appetite or weight
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Cognitive Behavioral Therapy (CBT)<br>
                        ‚Ä¢ Antidepressant medications<br>
                        ‚Ä¢ Regular exercise and lifestyle changes<br>
                        ‚Ä¢ Support groups and peer counseling
                    </div>
                </div>
                
                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üò∞</div>
                        <h3 style="color: var(--text-primary); margin: 0;">Anxiety Disorders</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Mental health conditions characterized by excessive fear, worry, and related behavioral disturbances.
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Excessive worry about everyday situations<br>
                        ‚Ä¢ Rapid heartbeat and sweating<br>
                        ‚Ä¢ Panic attacks with physical symptoms<br>
                        ‚Ä¢ Avoidance of anxiety-triggering situations<br>
                        ‚Ä¢ Restlessness and feeling on edge<br>
                        ‚Ä¢ Difficulty sleeping due to worry
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Exposure therapy and CBT<br>
                        ‚Ä¢ Anti-anxiety medications<br>
                        ‚Ä¢ Relaxation and breathing techniques<br>
                        ‚Ä¢ Mindfulness and meditation practices
                    </div>
                </div>
                
                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üé≠</div>
                        <h3 style="color: var(--text-primary); margin: 0;">Bipolar Disorder</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        A condition causing extreme mood swings including emotional highs (mania) and lows (depression).
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Manic episodes: elevated mood, high energy<br>
                        ‚Ä¢ Depressive episodes: sadness, hopelessness<br>
                        ‚Ä¢ Rapid or pressured speech<br>
                        ‚Ä¢ Impulsive or risky behavior<br>
                        ‚Ä¢ Severe mood swings<br>
                        ‚Ä¢ Changes in sleep patterns
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Mood stabilizing medications<br>
                        ‚Ä¢ Psychotherapy and counseling<br>
                        ‚Ä¢ Lifestyle management and routine<br>
                        ‚Ä¢ Family therapy and support
                    </div>
                </div>

                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üòµ‚Äçüí´</div>
                        <h3 style="color: var(--text-primary); margin: 0;">ADHD</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Attention-Deficit/Hyperactivity Disorder affects focus, hyperactivity, and impulse control.
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Difficulty paying attention to details<br>
                        ‚Ä¢ Hyperactivity and restlessness<br>
                        ‚Ä¢ Impulsive decision making<br>
                        ‚Ä¢ Difficulty organizing tasks<br>
                        ‚Ä¢ Forgetfulness in daily activities<br>
                        ‚Ä¢ Trouble following instructions
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Stimulant and non-stimulant medications<br>
                        ‚Ä¢ Behavioral therapy and coaching<br>
                        ‚Ä¢ Organizational skills training<br>
                        ‚Ä¢ Educational accommodations
                    </div>
                </div>

                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üò®</div>
                        <h3 style="color: var(--text-primary); margin: 0;">PTSD</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Post-Traumatic Stress Disorder develops after experiencing or witnessing traumatic events.
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Flashbacks and nightmares<br>
                        ‚Ä¢ Avoidance of trauma reminders<br>
                        ‚Ä¢ Hypervigilance and startled responses<br>
                        ‚Ä¢ Emotional numbness<br>
                        ‚Ä¢ Sleep disturbances<br>
                        ‚Ä¢ Intrusive thoughts about the trauma
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Trauma-focused therapy (EMDR, CPT)<br>
                        ‚Ä¢ Medications for symptoms<br>
                        ‚Ä¢ Support groups for trauma survivors<br>
                        ‚Ä¢ Stress management techniques
                    </div>
                </div>

                <div style="background: var(--bg-secondary); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üîÑ</div>
                        <h3 style="color: var(--text-primary); margin: 0;">OCD</h3>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Obsessive-Compulsive Disorder involves unwanted repetitive thoughts and behaviors.
                    </p>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong style="color: var(--primary);">Key Symptoms:</strong><br>
                        ‚Ä¢ Obsessive thoughts or images<br>
                        ‚Ä¢ Compulsive behaviors or rituals<br>
                        ‚Ä¢ Fear of contamination or harm<br>
                        ‚Ä¢ Need for symmetry or order<br>
                        ‚Ä¢ Checking behaviors<br>
                        ‚Ä¢ Significant distress from symptoms
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--primary);">Treatment Options:</strong><br>
                        ‚Ä¢ Exposure and Response Prevention (ERP)<br>
                        ‚Ä¢ Cognitive Behavioral Therapy<br>
                        ‚Ä¢ SSRI medications<br>
                        ‚Ä¢ Support groups and family therapy
                    </div>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, #e8f5e8, #f0f8f0); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; border-left: 4px solid #00b894;">
                <h3 style="color: #2d3748; font-size: 1.4rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center;">
                    üí° Essential Mental Health Tips & Strategies
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">üèÉ‚Äç‚ôÇÔ∏è</span>
                            <strong style="color: #00b894;">Regular Exercise</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Just 30 minutes of daily exercise can significantly improve mood, reduce stress, and boost self-esteem. Try walking, dancing, or any activity you enjoy.
                        </p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">üò¥</span>
                            <strong style="color: #00b894;">Quality Sleep</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Aim for 7-9 hours of quality sleep each night. Create a bedtime routine, avoid screens before bed, and keep your bedroom cool and dark.
                        </p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">üßò‚Äç‚ôÄÔ∏è</span>
                            <strong style="color: #00b894;">Mindfulness & Meditation</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Practice mindfulness daily to reduce anxiety and improve focus. Start with just 5 minutes of deep breathing or guided meditation.
                        </p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">ü§ù</span>
                            <strong style="color: #00b894;">Social Connections</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Maintain meaningful relationships and seek support when needed. Social connections are crucial for mental health and resilience.
                        </p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">üçé</span>
                            <strong style="color: #00b894;">Healthy Nutrition</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Eat a balanced diet rich in fruits, vegetables, and omega-3 fatty acids. Limit alcohol and caffeine, which can worsen anxiety and depression.
                        </p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; border: 1px solid #e2e8f0; color: #2d3748;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;">üè•</span>
                            <strong style="color: #00b894;">Professional Help</strong>
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            Seeking help from mental health professionals is a sign of strength, not weakness. Don't hesitate to reach out when you need support.
                        </p>
                    </div>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #fff5f5, #fef5e7); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; border-left: 4px solid #e17055;">
                <h3 style="color: #2d3748; font-size: 1.4rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center;">
                    üö® When to Seek Immediate Help
                </h3>
                <div style="color: #2d3748; line-height: 1.6;">
                    <p style="margin-bottom: 1rem; font-weight: 500;">
                        Contact a mental health professional or emergency services immediately if you or someone you know experiences:
                    </p>
                    <ul style="margin: 0; padding-left: 1.5rem;">
                        <li style="margin-bottom: 0.5rem;">Thoughts of suicide or self-harm</li>
                        <li style="margin-bottom: 0.5rem;">Thoughts of harming others</li>
                        <li style="margin-bottom: 0.5rem;">Severe depression that interferes with daily functioning</li>
                        <li style="margin-bottom: 0.5rem;">Panic attacks that are frequent or severe</li>
                        <li style="margin-bottom: 0.5rem;">Substance abuse as a coping mechanism</li>
                        <li style="margin-bottom: 0.5rem;">Inability to care for yourself or others</li>
                    </ul>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin-top: 1rem; border: 1px solid #e2e8f0;">
                        <strong style="color: #e17055;">Crisis Helplines:</strong><br>
                        ‚Ä¢ National Suicide Prevention Lifeline: 988<br>
                        ‚Ä¢ Crisis Text Line: Text HOME to 741741<br>
                        ‚Ä¢ Emergency Services: 911
                    </div>
                </div>
            </div>

            <div style="background: var(--bg-card); border-radius: 15px; padding: 2rem; border: 1px solid var(--border-color);">
                <h3 style="color: var(--primary); font-size: 1.3rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center;">
                    üå± Building Mental Resilience
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">üéØ Set Realistic Goals</h4>
                        <p style="color: var(--text-secondary); line-height: 1.5; margin: 0;">
                            Break large tasks into smaller, manageable steps. Celebrate small victories and progress.
                        </p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">üìù Practice Gratitude</h4>
                        <p style="color: var(--text-secondary); line-height: 1.5; margin: 0;">
                            Write down 3 things you're grateful for each day. This simple practice can improve mood and outlook.
                        </p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">üé® Engage in Hobbies</h4>
                        <p style="color: var(--text-secondary); line-height: 1.5; margin: 0;">
                            Pursue activities you enjoy. Creative outlets and hobbies provide stress relief and fulfillment.
                        </p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">üåø Spend Time in Nature</h4>
                        <p style="color: var(--text-secondary); line-height: 1.5; margin: 0;">
                            Regular time outdoors can reduce stress, improve mood, and boost vitamin D levels.
                        </p>
                    </div>
                </div>
            </div>
            
            <button style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: block; margin: 2rem auto 0;" onclick="showSection('assessment')">
                üîÑ Back to Wellness Assessment
            </button>
        </div>
    `;
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('yuva-language', lang);
    updateLanguageButtons();
    
    // Refresh current section content
    if (currentSection === 'assessment') {
        startConversation();
    } else if (currentSection === 'education') {
        showEducationContent();
    }
}

function updateLanguageButtons() {
    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
    const activeBtn = currentLang === 'hi-en' ? 'lang-hi' : 'lang-en';
    document.getElementById(activeBtn).classList.add('active');
}
</script>
{% endblock %}